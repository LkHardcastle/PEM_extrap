install.packages(c("ggplot2", "cowplot", "tidyr", "dplyr"))
library(ggplot2)
#
setwd("C:\\Users\\hardc\\Documents\\PEM_extrap")
library(dplyr)
library(rstan)
install.packages("rstan")
install.packages("survHE")
remotes::install_github("giabaio/survHEhmc")
library(remotes)
install.packages("remotes")
remotes::install_github("giabaio/survHEhmc")
remotes::install_github("giabaio/survHEhmc")
library(survHE)
remotes::install_github("giabaio/survHEhmc")
install.packages("survextrap", repos=c('https://chjackson.r-universe.dev',
'https://cloud.r-project.org'))
library(survextrap)
library(ggplot2)
nd_modr <- survextrap(Surv(years, status) ~ 1, data=colons, chains=1,
smooth_model = "random_walk",
mspline = list(add_knots=4))
plot(nd_modr, tmax=5)
pairs()
nd_modr <- survextrap(Surv(years, status) ~ 1, data=colons, chains=1,
smooth_model = "random_walk",
mspline = list(add_knots=4))
pairs(nd_modr)
pairs(nd_modr$stanfit)
nd_modr <- survextrap(Surv(years, status) ~ 1, data=colons, chains=1,
smooth_model = "random_walk",
mspline = list(add_knots=4))
pairs()
pairs(nd_modr$stanfit)
x11()
pairs(nd_modr$stanfit)
pairs(nd_modr$stanfit)
nd_modr$stanfit
nd_modr <- survextrap(Surv(years, status) ~ 1, data=colons, chains=4,
smooth_model = "random_walk",
mspline = list(add_knots=4))
nd_modr$stanfit
pairs(nd_modr$stanfit, pars = c("gamma"))
pairs(nd_modr$stanfit, pars = c("coefs"))
trace(nd_modr$stanfit)
traceplot(nd_modr$stanfit, pars = c("gamma"))
rstan::traceplot(nd_modr$stanfit, pars = c("gamma"))
nd_modr <- survextrap(Surv(years, status) ~ 1, data=colons, chains=1,
smooth_model = "random_walk",
mspline = list(add_knots=4))
rstan::traceplot(nd_modr$stanfit, pars = c("gamma"))
summary(nd_modr$stanfit, pars = c("gamma"))
head(nd_modr$stanfit)
head(nd_modr)
head(summary(nd_modr))
head(summary(nd_modr$stanfit))
summary(nd_modr$stanfit)
nd_modr$stanfit
nd_modr <- survextrap(Surv(years, status) ~ 1, data=colons, chains=2,
smooth_model = "random_walk",
mspline = list(add_knots=4))
nd_modr$stanfit
devtools::install_github("Anon19820/PiecewiseChangepoint")
install.packages("devtools")
devtools::install_github("Anon19820/PiecewiseChangepoint")
library(PiecewiseChangepoint)
df <- gen_piece_df(n_obs = n_obs,n_events_req = n_events_req,
num.breaks = length(t_change),rate = rate ,
t_change = t_change, max_time = max_time)
n_obs =300
n_events_req=300
max_time =  24 # months
rate = c(0.75,0.25)/12 # we want to report on months
t_change =12 # change-point at 12 months
df <- gen_piece_df(n_obs = n_obs,n_events_req = n_events_req,
num.breaks = length(t_change),rate = rate ,
t_change = t_change, max_time = max_time)
View(df)
Collapsing_Model <- collapsing.model(data.frame(status = colons$status, time = colons$years),
n.iter = 20750,
burn_in = 750,
n.chains = 2,
timescale = "months")
print(Collapsing_Model)
Collapsing_Model$changepoint
plot(Collapsing_Model, type = "hazard")+xlab("Time (Months)")+ylab("Hazards")+ylim(c(0,.1))
Collapsing_Model <- collapsing.model(data.frame(status = colons$status, time = colons$years),
n.iter = 20750,
burn_in = 750,
n.chains = 2,
timescale = "years")
print(Collapsing_Model)
plot(Collapsing_Model, type = "hazard")+xlab("Time (Months)")+ylab("Hazards")+ylim(c(0,.1))
plot(Collapsing_Model, type = "hazard")+xlab("Time (Months)")+ylab("Hazards")+ylim(c(0,1))
plot(nd_modr, tmax=5)
plot(Collapsing_Model, max_predict = 5, chng.num = 1)+xlab("Time")
plot(Collapsing_Model, max_predict = 5)+xlab("Time")
#
setwd("C:\\Users\\hardc\\Documents\\PEM_extrap\\Colon")
